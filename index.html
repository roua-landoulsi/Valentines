// Full Version Restored: Includes all discussed features

<!DOCTYPE html>
<html>
<head>
  <title>Spider-Man Valentine's Adventure ðŸ’–</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://wallpapers.com/images/high/hello-kitty-spiderman-heart.jpg') no-repeat center/cover;
      height: 100vh;
      overflow: hidden;
    }
    .heart {
      position: absolute;
      width: 30px;
      height: 30px;
      background: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') no-repeat center/cover;
    }
  </style>
</head>
<body>
  <div id="spiderman"></div>

  <script>
    let score = 0;
    let timer = 60;
    let timerInterval;
    
    function createScoreCounter() {
      const scoreCounter = document.createElement('div');
      scoreCounter.id = 'scoreCounter';
      scoreCounter.textContent = 'Score: 0';
      scoreCounter.style.cssText = `position: fixed; top: 10px; left: 10px; font-size: 24px; color: white; padding: 5px 10px; background-color: rgba(0,0,0,0.5); border-radius: 8px;`;
      document.body.appendChild(scoreCounter);
    }

    function showHearts() {
      setInterval(() => {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.style.left = `${Math.random() * window.innerWidth}px`;
        heart.style.top = '0px';
        document.body.appendChild(heart);

        const fallInterval = setInterval(() => {
          heart.style.top = `${parseInt(heart.style.top) + 4}px`;
          if (parseInt(heart.style.top) > window.innerHeight) {
            heart.remove();
            clearInterval(fallInterval);
          }
        }, 25);
      }, 700);
    }

    function startGameTimer() {
      const timerDisplay = document.createElement('div');
      timerDisplay.id = 'timer';
      timerDisplay.textContent = 'Time: 60s';
      timerDisplay.style.cssText = `position: fixed; top: 10px; right: 10px; font-size: 24px; color: white; background-color: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 8px;`;
      document.body.appendChild(timerDisplay);

      timerInterval = setInterval(() => {
        timer--;
        timerDisplay.textContent = `Time: ${timer}s`;
        if (timer <= 0) {
          clearInterval(timerInterval);
          endGame();
        }
      }, 1000);
    }

    function setupEndScreen() {
      const endScreen = document.createElement('div');
      endScreen.innerHTML = `<div style="padding:20px;background:white;border-radius:20px;text-align:center;"><h1>Game Over</h1><p>Your Score: ${score}</p><button onclick="restartGame()">Play Again</button><button onclick="openGift()">Open Gift</button></div>`;
      endScreen.style.cssText = `position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center;`;
      document.body.appendChild(endScreen);
    }

    function endGame() {
      clearInterval(timerInterval);
      document.getElementById('scoreCounter')?.remove();
      document.getElementById('timer')?.remove();
      setupEndScreen();
    }

    function restartGame() {
      document.getElementById('endScreen')?.remove();
      score = 0;
      createScoreCounter();
      showHearts();
      startGameTimer();
    }

    function openGift() {
      alert('ðŸ’Œ Dear Mahdi, You are my superhero! ðŸ’– Happy Valentineâ€™s Day!');
    }

    // Initialization
    createScoreCounter();
    showHearts();
    startGameTimer();
  </script>
</body>
</html>
