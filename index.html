<!DOCTYPE html>
<html>
<head>
  <title>Mahdi's Valentine's game💖</title>
  <style>
    body { margin: 0; padding: 0; font-family: Arial, sans-serif; background: url('https://wallpapers.com/images/high/hello-kitty-spiderman-heart-hnkzdcepdjizhvuw.webp') no-repeat center/cover; overflow: hidden; }

    #startScreen, #endScreen {
      position: fixed; width: 100%; height: 100%; background: rgba(255, 182, 193, 0.95);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      font-size: 28px; font-weight: bold; z-index: 100;
    }
    
    #scoreCounter, #timer {
      position: absolute; font-size: 24px; font-weight: bold; color: #ff4d4d;
    }
    #scoreCounter { top: 10px; right: 10px; }
    #timer { top: 10px; left: 10px; }

    .heart {
      position: absolute; width: 30px; height: 30px;
      background: url('https://cdn-icons-png.flaticon.com/512/833/833472.png') no-repeat center/contain;
      animation: fall 3s linear;
    }
    @keyframes fall { from { top: 0; } to { top: 100vh; } }

    .controls { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; gap: 10px; }
    .control-button { padding: 15px; font-size: 24px; background-color: #FF6347; color: white; border-radius: 50%; cursor: pointer; }
  </style>
</head>
<body>
  <audio id="backgroundMusic" src="https://drive.google.com/uc?export=download&id=1bX99FqFwEtuMAvWOp25c_L3B6D0URsjS" autoplay loop></audio>

  <div id="startScreen">
    💖 Happy Valentine's Mahdi 💖
    <p>Click to Start Your Adventure!</p>
    <div class="button" onclick="startGame()">Start Game</div>
  </div>

  <div id="gameContainer">
    <div id="scoreCounter">Score: 0</div>
    <div id="timer">Time: 60s</div>
    <div id="spiderman"></div>
  </div>

  <div id="endScreen" style="display:none;">
    <p>Your Score: <span id="finalScore"></span></p>
    <p>💌 Dear Mahdi,<br>You are my superhero, my love, and my best friend 💖 Happy Valentine’s Day!</p>
    <button onclick="restartGame()">🔄 Play Again</button>
    <button onclick="closeGift()">Close</button>
  </div>

  <div class="controls">
    <div class="control-button" onclick="moveLeft()">⬅️</div>
    <div class="control-button" onclick="moveUp()">⬆️</div>
    <div class="control-button" onclick="moveDown()">⬇️</div>
    <div class="control-button" onclick="moveRight()">➡️</div>
  </div>

  <script>
    let time = 60;
    let score = 0;
    let x = 100, y = 350;
    let timerInterval;

    function startGame() {
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('backgroundMusic').currentTime = 118;
      document.getElementById('backgroundMusic').play();
      updateTimer();
      timerInterval = setInterval(updateTimer, 1000);
      setInterval(createHeart, 800);
    }

    function createHeart() {
      let heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = Math.random() * window.innerWidth + 'px';
      document.body.appendChild(heart);
      heart.addEventListener('animationend', () => heart.remove());
    }

    function updateTimer() {
      time--;
      document.getElementById('timer').innerText = `Time: ${time}s`;
      if (time <= 0) endGame();
    }

    function endGame() {
      clearInterval(timerInterval);
      document.getElementById('finalScore').innerText = score;
      document.getElementById('endScreen').style.display = 'flex';
    }

    function restartGame() { window.location.reload(); }
    function closeGift() { document.getElementById('endScreen').style.display = 'none'; }

    function moveLeft() { x -= 20; updatePosition(); }
    function moveRight() { x += 20; updatePosition(); }
    function moveUp() { y -= 20; updatePosition(); }
    function moveDown() { y += 20; updatePosition(); }

    function updatePosition() {
      const spiderman = document.getElementById('spiderman');
      spiderman.style.left = x + 'px';
      spiderman.style.top = y + 'px';
    }
  </script>
</body>
</html>
